<mat-toolbar>
  <button mat-icon-button (click)="sidenav.toggle()">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      height="24px"
      viewBox="0 -960 960 960"
      width="24px"
      fill="#000000"
    >
      <path
        d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z"
      />
    </svg>
  </button>
  <img src="assets/img/logo.png" alt="Logo" class="logo"/>
  <span>{{ "system.title" | translate }}</span>
  <span class="spacer"></span>
  @if ((authService.user$ | async); as user) {
    <h5>{{ currentTime }} {{ user }}</h5>
  }
  <!-- 登出按鈕 -->
  <button
    mat-raised-button
    class="top-btn logout-btn"
    appDebounceClick
    (debounceClick)="logout()"
  >
    {{ "login.logout" | translate }}
  </button>
</mat-toolbar>

<mat-sidenav-container class="container">
  <mat-sidenav #sidenav mode="side" opened>
    <mat-accordion multi="true" displayMode="default">
      @for (sub of this.authService.menu$ | async; track sub.funcCode) {
        <!-- 當沒有子層選項則不顯示父層 -->
        @if (sub.subFuncMenuList.length > 0) {
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              {{ sub.funcCode + sub.funcName }}
            </mat-expansion-panel-header>
            @for (children of sub.subFuncMenuList; track children.funcCode) {
              <mat-nav-list>
                <a
                  mat-list-item
                  [routerLink]="children.funcLink"
                  routerLinkActive="active-link"
                  [routerLinkActiveOptions]="{ exact: true }"
                  >
                  {{ children.funcCode + children.funcName }}
                </a>
              </mat-nav-list>
            }
          </mat-expansion-panel>
        }
      }
    </mat-accordion>
  </mat-sidenav>

  <mat-sidenav-content>
    <router-outlet></router-outlet>
  </mat-sidenav-content>
</mat-sidenav-container>
